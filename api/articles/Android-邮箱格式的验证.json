{"title":"Android-邮箱格式的验证","slug":"Android-邮箱格式的验证","date":"2018-07-20T08:09:31.000Z","updated":"2018-12-07T08:28:49.943Z","comments":true,"excerpt":"","content":"<h1 id=\"Android-实现对邮箱的验证\"><a href=\"#Android-实现对邮箱的验证\" class=\"headerlink\" title=\"Android-实现对邮箱的验证\"></a>Android-实现对邮箱的验证</h1><p>由于Android开发中经常会使用到表单，还有相关的提交，验证等等。接下来是一个关于EditText的邮箱格式验证：</p>\n<h4 id=\"那么首先要有一个布局文件\"><a href=\"#那么首先要有一个布局文件\" class=\"headerlink\" title=\"那么首先要有一个布局文件\"></a>那么首先要有一个布局文件</h4><p>相关代码：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;TextView</span><br><span class=\"line\">       android:id=&quot;@+id/textView3&quot;</span><br><span class=\"line\">       android:layout_width=&quot;wrap_content&quot;</span><br><span class=\"line\">       android:layout_height=&quot;wrap_content&quot;</span><br><span class=\"line\">       android:layout_alignParentStart=&quot;true&quot;</span><br><span class=\"line\">       android:layout_alignParentTop=&quot;true&quot;</span><br><span class=\"line\">       android:layout_marginStart=&quot;30dp&quot;</span><br><span class=\"line\">       android:layout_marginTop=&quot;167dp&quot;</span><br><span class=\"line\">       android:text=&quot;邮箱&quot;</span><br><span class=\"line\">       tools:layout_editor_absoluteX=&quot;55dp&quot;</span><br><span class=\"line\">       tools:layout_editor_absoluteY=&quot;170dp&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">   &lt;EditText</span><br><span class=\"line\">       android:id=&quot;@+id/ed_email&quot;</span><br><span class=\"line\">       android:layout_width=&quot;wrap_content&quot;</span><br><span class=\"line\">       android:layout_height=&quot;wrap_content&quot;</span><br><span class=\"line\">       android:layout_alignParentEnd=&quot;true&quot;</span><br><span class=\"line\">       android:layout_below=&quot;@+id/textView&quot;</span><br><span class=\"line\">       android:layout_marginEnd=&quot;21dp&quot;</span><br><span class=\"line\">       android:ems=&quot;10&quot;</span><br><span class=\"line\">       android:inputType=&quot;textPersonName&quot;</span><br><span class=\"line\">       android:text=&quot;Name&quot;</span><br><span class=\"line\">       tools:layout_editor_absoluteX=&quot;135dp&quot;</span><br><span class=\"line\">       tools:layout_editor_absoluteY=&quot;22dp&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">   &lt;Button</span><br><span class=\"line\">       android:id=&quot;@+id/button&quot;</span><br><span class=\"line\">       android:layout_width=&quot;wrap_content&quot;</span><br><span class=\"line\">       android:layout_height=&quot;wrap_content&quot;</span><br><span class=\"line\">       android:layout_centerInParent=&quot;true&quot;</span><br><span class=\"line\">       android:text=&quot;提交&quot;</span><br><span class=\"line\">       tools:layout_editor_absoluteX=&quot;118dp&quot;</span><br><span class=\"line\">       tools:layout_editor_absoluteY=&quot;217dp&quot; /&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"邮箱验证需要的函数isEmail（）：\"><a href=\"#邮箱验证需要的函数isEmail（）：\" class=\"headerlink\" title=\"邮箱验证需要的函数isEmail（）：\"></a>邮箱验证需要的函数isEmail（）：</h4><p>邮箱的格式应改为：数字或者字母@数字或字母.数字或字母</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public static boolean isEmail(String email)&#123;</span><br><span class=\"line\">        if (null==email || &quot;&quot;.equals(email)) return false;</span><br><span class=\"line\">        //Pattern p = Pattern.compile(&quot;\\\\w+@(\\\\w+.)+[a-z]&#123;2,3&#125;&quot;); //简单匹配</span><br><span class=\"line\">        Pattern p =  Pattern.compile(&quot;\\\\w+([-+.]\\\\w+)*@\\\\w+([-.]\\\\w+)*\\\\.\\\\w+([-.]\\\\w+)*&quot;);//复杂匹配</span><br><span class=\"line\">        Matcher m = p.matcher(email);</span><br><span class=\"line\">        return m.matches();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"接下来就要在MainActivity中实现逻辑了：\"><a href=\"#接下来就要在MainActivity中实现逻辑了：\" class=\"headerlink\" title=\"接下来就要在MainActivity中实现逻辑了：\"></a>接下来就要在MainActivity中实现逻辑了：</h4><p>简单的通过id获取各个控件，还有其他的就不多说了。主要是实现对isEmail（）函数的调用。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MainActivity extends AppCompatActivity &#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">\t//声明需要的控件</span><br><span class=\"line\">    private static EditText ed_email;</span><br><span class=\"line\">    private Button button;</span><br><span class=\"line\">    //由于Android边编译边生成的原理，将匹配字符串放入全局，作为静态变量可以提高效率</span><br><span class=\"line\">    public static Pattern p = </span><br><span class=\"line\">\t\t    Pattern.compile(&quot;\\\\w+([-+.]\\\\w+)*@\\\\w+([-.]\\\\w+)*\\\\.\\\\w+([-.]\\\\w+)*&quot;);</span><br><span class=\"line\">   </span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class=\"line\">        super.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_main);</span><br><span class=\"line\">        setFullScreen();</span><br><span class=\"line\">        allWindow();</span><br><span class=\"line\">\t\t//实体化控件</span><br><span class=\"line\">        ed_email=(EditText)findViewById(R.id.ed_email);</span><br><span class=\"line\">        button=(Button)findViewById(R.id.button);</span><br><span class=\"line\">        //对button添加点击事件</span><br><span class=\"line\">        button.setOnClickListener(new View.OnClickListener() &#123;</span><br><span class=\"line\">            @Override</span><br><span class=\"line\">            public void onClick(View v) &#123;</span><br><span class=\"line\">            //调用编写的isEmail()函数</span><br><span class=\"line\">            //获取到输入的内容并转换为字符串形式，这样才可以进行匹配，且邮箱格式不能太长，字符串长度31以内</span><br><span class=\"line\">            //按照实际需要可以添加不同的事件</span><br><span class=\"line\">                if (isEmail(ed_email.getText().toString().trim()) &amp;&amp; ed_email.getText().toString().trim().length()&lt;=31)&#123;</span><br><span class=\"line\">                    Toast.makeText(MainActivity.this,&quot;邮箱验证成功&quot;,Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">                &#125;else &#123;</span><br><span class=\"line\">                    Toast.makeText(MainActivity.this,&quot;邮箱格式错误&quot;,Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   //验证函数优化版</span><br><span class=\"line\">    public static boolean isEmail(String email)&#123;</span><br><span class=\"line\">        if (null==email || &quot;&quot;.equals(email)) return false;</span><br><span class=\"line\">        Matcher m = p.matcher(email);</span><br><span class=\"line\">        return m.matches();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><em>以上就是对邮箱的验证，第一次写博客希望能共同学习，共同提高</em></p>\n","thumbnail":"/img/air.jpg","categories":[{"name":"Android","path":"api/categories/Android.json"}],"tags":[{"name":"Android","path":"api/tags/Android.json"},{"name":"Email","path":"api/tags/Email.json"}]}